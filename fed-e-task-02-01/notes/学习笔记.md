## 1、前端工程化

- 脚手架工具开发
- 自动化构建系统
- 模块化打包
- 项目代码规范化
- 自动化部署



## 2、脚手架工具

### 2.1、解决的问题

- 相同的组织结构
- 相同的开发范式
- 相同的模块以来
- 相同的工具配置
- 相同的基础代码



### 2.2、Yeoman

```
yarn global add yo
yarn global add generator-node
yo node 
```

#### sub generator

```
mkdir my-modules-01
cd my-modules-01
yo node:cli
yarn link
yarn
my-modules-01 --help
```

**使用步骤：**

1. 明确需求
2. 找到何事的Generator
3. 全局范围安装找到的Generator
4. 通过yo运行对应的generator
5. 通过命令行交互填写选项
6. 生成目录结构



### 2.3、自定义Generator

- 目录结构

![image-20200604222043146](..\..\images\image-20200604222043146.png)

```javascript
// app/index.js
// 此文件使 Generator 的核心入口
// 需要导出一个继承自 Yeoman Generator 的类型
// Yeoman Generator 在工作时会自动调用我们在此类型中定义的一些生命周期方法
// 通过调用父类提供的一些工具方法实现功能

const Generator = require('yeoman-generator')
module.exports = class extends Generator {
    writing() {
        this.fs.write(
            this.destinationPath('temp.txt'),
            Math.random().toString()
        )
    }
}
```

- 根据模板创建文件

![image-20200604222639402](..\..\images\image-20200604222639402.png)

```javascript
// app/index.js
const Generator = require('yeoman-generator')
module.exports = class extends Generator {
    writing() {
        const tmpl = this.templatePath('foo.txt')
        const output = this.destinationPath('foo.txt')
        const content = {title: 'hello Generator', success: false}
        this.fs.copyTpl(tmpl, output, content)
    }
}

// templates/foo.txt
<%= title %>
<%= success %>
```

- 接收用户输入数据

```javascript
// app/index.js
const Generator = require('yeoman-generator')
module.exports = class extends Generator {
    prompting() {
        return this.prompt([
            {
                type: 'input',
                name: 'name',
                message: 'Your project name',
                default: this.appname
            }
        ])
        .then(answers => {
            // answers => {name: 'user input value'}
            this.answers = answers
        })
    }
    writing() {
        const tmpl = this.templatePath('foo.txt')
        const output = this.destinationPath('foo.txt')
        const content = this.answers
        this.fs.copyTpl(tmpl, output, content)
    }
}
// templates/foo.txt
<%= name %>
```

